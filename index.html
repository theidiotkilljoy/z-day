<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Welcome Zachary — Roll for Initiative</title>
  <style>
    :root{
      --bg:#0a0b10; --panel:#11131a; --edge:#1c2130; --accent:#b48bff; --accent2:#7cffb8; --text:#e8ecf1;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      background:
        radial-gradient(1200px 800px at 50% 0%, #121622 0%, #0a0b10 70%),
        repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 2px, transparent 2px 4px);
      color:var(--text);
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      overflow:hidden;
    }
    .crt:before{
      content:""; position:fixed; inset:0; pointer-events:none;
      background:linear-gradient(rgba(255,255,255,.03),rgba(0,0,0,0) 2px); background-size:100% 3px;
      mix-blend-mode:overlay; opacity:.4;
    }
    .wrap{height:100%;display:grid;grid-template-rows:auto 1fr auto;gap:18px;}
    header{display:grid;place-items:center;padding-top:24px}
    h1{
      margin:0; font-weight:900; letter-spacing:.5px; text-transform:lowercase;
      font-size:clamp(28px,5vw,56px);
      text-shadow:0 2px 0 #000, 0 0 24px rgba(180,139,255,.35);
    }
    main{display:grid;place-items:center}
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--edge); border-radius:16px; padding:24px 28px;
      box-shadow:inset 0 0 40px rgba(0,0,0,.35), 0 24px 80px rgba(0,0,0,.55);
      max-width:min(94vw,900px);
      text-align:center;
    }
    .subtitle{opacity:.9;margin:8px 0 18px;font-size:clamp(14px,2.4vw,18px)}
    .d20-wrap{display:grid;place-items:center;gap:10px}
    /* Dice SVG sizing */
    .d20{width:min(70vw,420px);height:auto;cursor:pointer;filter:drop-shadow(0 10px 30px rgba(0,0,0,.6));transition:transform .2s ease}
    .d20:hover{transform:translateY(-2px) scale(1.01)}
    .hint{font-size:12px;opacity:.7}
    .rollout{font-size:clamp(18px,3.2vw,28px); margin-top:8px; min-height:1.6em}
    .glow{text-shadow:0 0 18px rgba(124,255,184,.55)}
    footer{display:grid;place-items:center;padding:0 0 24px}
    .enter{
      display:none; /* revealed after roll */
      background:linear-gradient(180deg, #1a2030, #0f1320);
      border:1px solid #2a334a; color:var(--text);
      font-weight:700; text-transform:uppercase; letter-spacing:.08em;
      padding:14px 20px; border-radius:12px; cursor:pointer;
      box-shadow:0 12px 30px rgba(0,0,0,.5), inset 0 0 20px rgba(124,255,184,.12);
      text-decoration:none;
    }
    .enter:focus{outline:2px solid var(--accent2); outline-offset:3px}
    .enter.show{display:inline-block; animation:pop .35s ease}
    @keyframes pop{0%{transform:scale(.9);opacity:.0}100%{transform:scale(1);opacity:1}}
    /* Pixel text accent */
    .pixel{font-family: "Press Start 2P", monospace, ui-monospace; font-size: clamp(12px, 2.2vw, 14px)}
    /* Import a web-safe pixel font fallback */
    @font-face{font-family:"Press Start 2P"; src: local("Press Start 2P");}
  </style>
</head>
<body class="crt">
  <div class="wrap">
    <header>
      <h1>welcome zachary</h1>
    </header>

    <main>
      <div class="panel">
        <div class="subtitle">roll for initiative</div>
        <div class="d20-wrap">
          <!-- Clickable D20 — always lands on 32 -->
          <svg id="die" class="d20" viewBox="0 0 512 512" aria-label="D20 die — click to roll">
            <!-- Outer icosahedron silhouette -->
            <defs>
              <linearGradient id="grad" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0%" stop-color="#2c2f47"/>
                <stop offset="100%" stop-color="#161a2a"/>
              </linearGradient>
              <linearGradient id="edge" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#7cffb8" stop-opacity=".85"/>
                <stop offset="100%" stop-color="#b48bff" stop-opacity=".85"/>
              </linearGradient>
              <filter id="glow">
                <feGaussianBlur stdDeviation="6" result="b"/>
                <feMerge>
                  <feMergeNode in="b"/><feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <polygon points="256,16 480,160 400,464 112,464 32,160" fill="url(#grad)" stroke="url(#edge)" stroke-width="6" filter="url(#glow)"/>
            <!-- Facet lines for retro vibe -->
            <g stroke="#2f3650" stroke-width="2" opacity=".9">
              <line x1="256" y1="16" x2="256" y2="496"/>
              <line x1="32" y1="160" x2="480" y2="160"/>
              <line x1="112" y1="464" x2="400" y2="464"/>
              <line x1="32" y1="160" x2="112" y2="464"/>
              <line x1="480" y1="160" x2="400" y2="464"/>
            </g>
            <!-- Number display (center) -->
            <g id="numGroup">
              <text id="num" x="256" y="290" text-anchor="middle" font-size="120" font-weight="900" fill="#eafdf5" class="glow">20</text>
              <text id="caption" x="256" y="330" text-anchor="middle" font-size="18" fill="#a7ffdf" opacity=".0">(…rolling…)</text>
            </g>
          </svg>
          <div class="hint pixel">click the die</div>
          <div class="rollout" id="rollout"></div>
        </div>
      </div>
    </main>

    <footer>
      <a id="enterBtn" class="enter" href="dungeon.html" role="button">enter the dungeon</a>
    </footer>
  </div>

  <script>
    const die = document.getElementById('die');
    const num = document.getElementById('num');
    const cap = document.getElementById('caption');
    const rollout = document.getElementById('rollout');
    const enterBtn = document.getElementById('enterBtn');

    let rolled = false;

    function easeInOut(t){return t<.5?2*t*t:-1+(4-2*t)*t}

    function fauxRollToThirtyTwo(){
      // Not RNG: choreographed sequence that ALWAYS lands on 32
      const keyframes = [3, 14, 7, 18, 11, 19, 9, 15, 6, 12, 17, 8, 13, 10, 16, 5, 4, 2, 1, 20, 32];
      const total = 1800; // ms
      const start = performance.now();
      cap.setAttribute('opacity', '1');

      function step(now){
        const t = Math.min(1, (now - start)/total);
        const idx = Math.floor(easeInOut(t) * (keyframes.length-1));
        const val = keyframes[idx];
        num.textContent = val;
        // wobble effect
        const wobble = (1 - t) * 8;
        die.style.transform = `rotate(${t*720}deg) scale(${1 + Math.sin(now/60)*0.01}) translateY(${Math.sin(now/80)*wobble}px)`;
        if(t < 1){
          requestAnimationFrame(step);
        } else {
          finalize();
        }
      }
      requestAnimationFrame(step);
    }

    function finalize(){
      cap.setAttribute('opacity','0');
      die.style.transform = 'none';
      rollout.innerHTML = '<span class="glow">You rolled: 32</span>';
      enterBtn.classList.add('show');
      rolled = true;
    }

    die.addEventListener('click', () => {
      if(rolled) return; // single use
      fauxRollToThirtyTwo();
    });
  </script>
</body>
</html>
